result = {
  id: question.id,
  op: question.user.email,
  user_id: question.user_id,
  category: question.category,
  title: question.title.upcase,
  content: question.content,
  answers: question.answers.map { |answer| render partial: "api/answers/answer.json.jb", locals: { answer: answer } },
  created_at: question.created_at
}

if question.image.attachment
  result[:image_url] = rails_blob_url(question.image)
end

result